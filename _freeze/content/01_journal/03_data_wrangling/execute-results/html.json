{
  "hash": "fcd96334caab397a91af22ec3f90b437",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Shahrokh Vahedi\"\n---\n\n\n# Question 1: Patent Dominance\nWhat US company / corporation has the most patents? List the 10 US companies with the most assigned/granted patents. Table 1 shows the top 10 Companies.\n\nTable 1: The Top 10 Companies with the Most Assigned/Granted Patents \n\n| **Rank** | **Organization**                            | **Number of Patents** |\n|------|-----------------------------------------|------------------:|\n| 1    | International Business Machines Corporation | 7547             |\n| 2    | Samsung Electronics Co., Ltd.              | 5835             |\n| 3    | Canon Kabushiki Kaisha                     | 4099             |\n| 4    | Sony Corporation                           | 3326             |\n| 5    | Microsoft Corporation                      | 3165             |\n| 6    | Google Inc.                                | 2668             |\n| 7    | Kabushiki Kaisha Toshiba                    | 2656             |\n| 8    | QUALCOMM Incorporated                       | 2597             |\n| 9    | LG Electronics Inc.                         | 2459             |\n| 10   | Panasonic Corporation                       | 2218             |\n\n# Question 2: Recent Patent Activity\nWhat US company had the most patents granted in August 2014? List the top 10 companies with the most new granted patents for August 2014. Table 2 shows the top 10 companies in August 2014.\n\nTable 2: The Top 10 Companies with the Most Assigned/Granted Patents in August 2014\n\n| Rank | **Organization**                            | **Number of Patents** |\n|------|-----------------------------------------|-------:|\n| 1    | International Business Machines Corporation | 718    |\n| 2    | Samsung Electronics Co., Ltd.              | 524    |\n| 3    | Canon Kabushiki Kaisha                     | 361    |\n| 4    | Microsoft Corporation                      | 337    |\n| 5    | Sony Corporation                           | 269    |\n| 6    | Google Inc.                                | 240    |\n| 7    | QUALCOMM Incorporated                       | 223    |\n| 8    | Apple Inc.                                 | 222    |\n| 9    | Kabushiki Kaisha Toshiba                    | 213    |\n| 10   | LG Electronics Inc.                         | 211    |\n\n\n# Question 3: Innovation in Tech\nWhat is the most innovative tech sector? For the top 10 companies (worldwide) with the most patents, what are the top 5 USPTO tech main classes?\nThe following table shows the top 5 tech main classes.\n\nTable 3: Top 5 USPTO Tech Main Classes\n\n| Rank | **Main Class ID** | **Number of Patents** |\n|------|--------------|------------------:|\n| 1    | 257          | 7956             |\n| 2    | 455          | 6120             |\n| 3    | 370          | 5448             |\n| 4    | 348          | 4102             |\n| 5    | 709          | 4010             |\n\n\n#Source Code\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_5deea1c1f0bf51c7fed2726441a14ec8'}\n\n```{.r .cell-code}\n# Data Wrangling\n\nlibrary(vroom)\nlibrary(data.table)\n\ncol_types <- list(\n  id = col_character(),\n  type = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  num_claims = col_double()\n)\n\n# Load the patent data\npatent_data <- vroom(\n  file = \"../../reduced_data/patent.tsv\", \n  delim = \"\\t\", \n  col_types = col_types,\n  na = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: type\n```\n:::\n\n```{.r .cell-code}\npatent_assignee_data <- vroom(\n  file = \"../../reduced_data/patent_assignee.tsv\", \n  delim = \"\\t\", \n  col_types = col_types,\n  na = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: id, type,\n#> date, num_claims\n```\n:::\n\n```{.r .cell-code}\nassignee_data <- vroom(\n  file = \"../../reduced_data/assignee.tsv\", \n  delim = \"\\t\", \n  col_types = col_types,\n  na = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: date,\n#> num_claims\n```\n:::\n\n```{.r .cell-code}\nuspc_data <- vroom(\n  file = \"../../reduced_data/uspc.tsv\", \n  delim = \"\\t\", \n  col_types = col_types,\n  na = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: id, type,\n#> date, num_claims\n```\n:::\n\n```{.r .cell-code}\n# Convert data to data.table format\nsetDT(patent_data)\nsetDT(assignee_data)\nsetDT(patent_assignee_data)\nsetDT(uspc_data)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: One or more parsing issues, call `problems()` on your data frame for details,\n#> e.g.:\n#>   dat <- vroom(...)\n#>   problems(dat)\n```\n:::\n\n```{.r .cell-code}\nclass(assignee_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"data.table\" \"data.frame\"\n```\n:::\n\n```{.r .cell-code}\n# First Question: Data Table Production\ncolnames(assignee_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"id\"           \"type\"         \"organization\"\n```\n:::\n\n```{.r .cell-code}\nsetnames(assignee_data, \"id\", \"assignee_id\")\nq1_data <- merge(x = assignee_data, y = patent_assignee_data, by = \"assignee_id\")\n\n# 1st Answer: Calculate total number of patents per assignee and organization\nsetDT(q1_data)\ntotal_patents <- q1_data[, .(n_patents = .N), by = .(assignee_id, organization)][order(-n_patents)]\ntop_10_US_patentholders <- total_patents[1:10]\n# Print the top 10 US patent holders\nprint(top_10_US_patentholders)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>                  assignee_id                                organization\n#>  1: org_ONzMjdbZXiKfw4L0cXl6 International Business Machines Corporation\n#>  2: org_pCbqlmAg8wlWzoi18ITD               Samsung Electronics Co., Ltd.\n#>  3: org_eAKK85fawH0NS7AdXOig                      Canon Kabushiki Kaisha\n#>  4: org_g8U335TH48QmGJOIQnNl                            Sony Corporation\n#>  5: org_LKW5uc4C9BNTBapFdHzJ                       Microsoft Corporation\n#>  6: org_LRPLF1XVb00MQdPndIbu                                 Google Inc.\n#>  7: org_EccJQIigrq4WyGinD0b8                    Kabushiki Kaisha Toshiba\n#>  8: org_adUSPYdjFbyHvoVakUrc                       QUALCOMM Incorporated\n#>  9: org_dfvuIWENawcU6lTd1Z3w                         LG Electronics Inc.\n#> 10: org_h5J6cVWyUahTuvNuksTb                       Panasonic Corporation\n#>     n_patents\n#>  1:      7547\n#>  2:      5835\n#>  3:      4099\n#>  4:      3326\n#>  5:      3165\n#>  6:      2668\n#>  7:      2656\n#>  8:      2597\n#>  9:      2459\n#> 10:      2218\n```\n:::\n\n```{.r .cell-code}\n# Export the dataframe to CSV\nfile_path <- \"../../exported_data/top_10_US_patentholders.csv\"\nwrite.csv(top_10_US_patentholders, file = file_path, row.names = FALSE)\n# Display a message to confirm the export\ncat(\"Dataframe exported successfully to\", file_path, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Dataframe exported successfully to ../../exported_data/top_10_US_patentholders.csv\n```\n:::\n\n```{.r .cell-code}\n# Second Question: Data Table Production\ncolnames(patent_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"id\"         \"date\"       \"num_claims\"\n```\n:::\n\n```{.r .cell-code}\nsetnames(patent_data, \"id\", \"patent_id\")\nq2_data <- merge(x = q1_data, y = patent_data, by = \"patent_id\")\n\n# 2nd Answer: Retrieve data for August 2014 and count patents per organization\naugust_data <- q2_data[month(date) == 8 & year(date) == 2014]\n\n# Group the data by organization and calculate the total number of patents for each organization.\ntotal_patents <- august_data[, .(num_patents = .N), by = organization]\n\n# Sort the results in descending order based on the number of patents and select the top 10 entries.\ntop_10_comp <- total_patents[order(-num_patents)][1:10]\n\n# Display the top 10 organizations that hold the highest number of patents in August 2014.\nas.data.table(top_10_comp)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"num_patents\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"718\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"524\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"361\"},{\"1\":\"Microsoft Corporation\",\"2\":\"337\"},{\"1\":\"Sony Corporation\",\"2\":\"269\"},{\"1\":\"Google Inc.\",\"2\":\"240\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"223\"},{\"1\":\"Apple Inc.\",\"2\":\"222\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"213\"},{\"1\":\"LG Electronics Inc.\",\"2\":\"211\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# Export the dataframe to CSV\nfile_path <- \"../../exported_data/top_10_US_August2014.csv\"\nwrite.csv(top_10_comp, file = file_path, row.names = FALSE)\n# Display a message to confirm the export\ncat(\"Dataframe exported successfully to\", file_path, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Dataframe exported successfully to ../../exported_data/top_10_US_August2014.csv\n```\n:::\n\n```{.r .cell-code}\n# Third Question: Data Table Production\nuspc_data[, patent_id := as.character(patent_id)]\nq3_data <- merge(x = uspc_data, y = q1_data, by = \"patent_id\")\n\n# 3rd Answer: Analyze patents assigned to top 10 companies and count patents per technology class\n# Perform a grouping operation on the data based on the organization and determine the count of patents for each group\ntotal_patents <- q3_data[, .(num_patents = .N), by = organization]\n\n# Sort the results in descending order based on the number of patents and select the top 10 entries\ntop_10_comp_patent <- total_patents[order(-num_patents)][1:10]\n\n# Filter the data to only include patents assigned to the top 10 companies\ntop_10_comp_patent <- q3_data[organization %in% top_10_comp_patent$organization]\n\n# Group the data by USPTO tech main class and count the number of patents\nmainclass_total <- top_10_comp_patent[, .(num_patents = .N), by = mainclass_id]\n\n# Order the results by number of patents in descending order and subset the top 5 technology classes\ntop_5_mainclass <- mainclass_total[order(-num_patents)][1:5]\n\n# Print the the top 5 USPTO tech main classes\nprint(top_5_mainclass)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>    mainclass_id num_patents\n#> 1:          257        7956\n#> 2:          455        6120\n#> 3:          370        5448\n#> 4:          348        4102\n#> 5:          709        4010\n```\n:::\n\n```{.r .cell-code}\n# Export the dataframe to CSV\nfile_path <- \"../../exported_data/top_5_mainclass.csv\"\nwrite.csv(top_5_mainclass, file = file_path, row.names = FALSE)\n# Display a message to confirm the export\ncat(\"Dataframe exported successfully to\", file_path, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Dataframe exported successfully to ../../exported_data/top_5_mainclass.csv\n```\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}